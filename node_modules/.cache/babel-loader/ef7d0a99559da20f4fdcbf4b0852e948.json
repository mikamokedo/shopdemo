{"ast":null,"code":"import _objectSpread from \"D:\\\\Qqqq\\\\shopdemo\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport { takeEvery, put, call, takeLatest, select } from 'redux-saga/effects';\nimport { change_loading_status, change_loading_status_false } from '../action/loading';\nimport { feetListProductsSuccess, feetSingleProductsSuccess } from '../action/products';\nimport { getMethod, getSingleMethod, fillterbycate } from '../api/index';\nimport { fillterTextSuccess, fillterSelectSuccess, resetfill } from '../action/fillter';\nimport * as CONSTANT from '../constant/index';\n\nfunction* getListProductsFromFirebase() {\n  yield put(change_loading_status());\n  let data = yield call(getMethod);\n  let listProducts = [];\n  data.forEach(element => {\n    let temp = element.data();\n    temp = _objectSpread({}, temp, {\n      id: element.id\n    });\n    listProducts.push(temp);\n  });\n  yield put(feetListProductsSuccess(listProducts));\n  yield put(change_loading_status_false());\n}\n\nfunction isEmpty(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) return true;\n  }\n\n  return false;\n}\n\nfunction* feetSingleProductFirebase(idSingle) {\n  yield put(change_loading_status());\n  const id = idSingle.payload.id;\n  let data = yield call(getSingleMethod, id);\n  yield put(feetSingleProductsSuccess(data));\n  yield put(change_loading_status_false());\n}\n\nfunction* addFillterTexttostore(value) {\n  yield put(fillterTextSuccess(value.payload));\n}\n\nfunction* addFillterSelecttostore(value) {\n  yield put(fillterSelectSuccess(value.payload));\n}\n\nfunction* submitFillterButton() {\n  const textSearch = yield select(state => state.fillterValueText);\n  const cateSearch = yield select(state => state.fillterValueSelect);\n\n  if (isEmpty(cateSearch)) {\n    let data = yield call(fillterbycate, cateSearch.fillCate);\n\n    if (cateSearch.fillCate !== \"all\") {\n      if (isEmpty(textSearch)) {\n        yield put(change_loading_status());\n        let data2 = data.filter(value => {\n          return value.name.trim().toLowerCase().includes(textSearch.fillerName.trim().toLowerCase());\n        });\n        yield put(feetListProductsSuccess(data2));\n        yield put(resetfill());\n        yield put(change_loading_status_false());\n      } else {\n        yield put(feetListProductsSuccess(data));\n        yield put(resetfill());\n      }\n    } else {\n      if (isEmpty(textSearch)) {\n        yield put(change_loading_status());\n        let data2 = data.filter(value => {\n          return value.name.trim().toLowerCase().includes(textSearch.fillerName.trim().toLowerCase());\n        });\n        yield put(feetListProductsSuccess(data2));\n        yield put(resetfill());\n        yield put(change_loading_status_false());\n      } else {\n        yield put(change_loading_status());\n        let data = yield call(getMethod);\n        let listProducts = [];\n        data.forEach(element => {\n          let temp = element.data();\n          temp = _objectSpread({}, temp, {\n            id: element.id\n          });\n          listProducts.push(temp);\n        });\n        yield put(feetListProductsSuccess(listProducts));\n        yield put(resetfill());\n        yield put(change_loading_status_false());\n      }\n    }\n  } else if (isEmpty(textSearch)) {\n    yield put(change_loading_status());\n    let data = yield select(state => state.ListProducts);\n    let data2 = data.filter(value => {\n      return value.name.trim().toLowerCase().includes(textSearch.fillerName.trim().toLowerCase());\n    });\n    yield put(feetListProductsSuccess(data2));\n    yield put(resetfill());\n    yield put(change_loading_status_false());\n  }\n}\n\nfunction* rootSaga() {\n  yield takeEvery(CONSTANT.FEET_LIST_PRODUCTS, getListProductsFromFirebase);\n  yield takeEvery(CONSTANT.FEET_SINGLE_PRODUCTS, feetSingleProductFirebase);\n  yield takeLatest(CONSTANT.ADD_FILLTER_TEXT, addFillterTexttostore);\n  yield takeLatest(CONSTANT.ADD_FILLTER_SELECT, addFillterSelecttostore);\n  yield takeLatest(CONSTANT.SUBMIT_SEARCH, submitFillterButton);\n}\n\nexport default rootSaga;","map":{"version":3,"sources":["D:/Qqqq/shopdemo/src/reduxSaga/index.js"],"names":["takeEvery","put","call","takeLatest","select","change_loading_status","change_loading_status_false","feetListProductsSuccess","feetSingleProductsSuccess","getMethod","getSingleMethod","fillterbycate","fillterTextSuccess","fillterSelectSuccess","resetfill","CONSTANT","getListProductsFromFirebase","data","listProducts","forEach","element","temp","id","push","isEmpty","obj","key","hasOwnProperty","feetSingleProductFirebase","idSingle","payload","addFillterTexttostore","value","addFillterSelecttostore","submitFillterButton","textSearch","state","fillterValueText","cateSearch","fillterValueSelect","fillCate","data2","filter","name","trim","toLowerCase","includes","fillerName","ListProducts","rootSaga","FEET_LIST_PRODUCTS","FEET_SINGLE_PRODUCTS","ADD_FILLTER_TEXT","ADD_FILLTER_SELECT","SUBMIT_SEARCH"],"mappings":";AAAA,SAAQA,SAAR,EAAkBC,GAAlB,EAAsBC,IAAtB,EAA2BC,UAA3B,EAAsCC,MAAtC,QAAmD,oBAAnD;AACA,SAAQC,qBAAR,EAA8BC,2BAA9B,QAAgE,mBAAhE;AACA,SAAQC,uBAAR,EAAgCC,yBAAhC,QAAgE,oBAAhE;AACA,SAAQC,SAAR,EAAkBC,eAAlB,EAAkCC,aAAlC,QAAsD,cAAtD;AACA,SAAQC,kBAAR,EAA2BC,oBAA3B,EAAgDC,SAAhD,QAAgE,mBAAhE;AACA,OAAO,KAAKC,QAAZ,MAA0B,mBAA1B;;AAEA,UAAUC,2BAAV,GAAuC;AACnC,QAAMf,GAAG,CAACI,qBAAqB,EAAtB,CAAT;AACA,MAAIY,IAAI,GAAG,MAAMf,IAAI,CAACO,SAAD,CAArB;AACA,MAAIS,YAAY,GAAG,EAAnB;AACAD,EAAAA,IAAI,CAACE,OAAL,CAAaC,OAAO,IAAI;AACpB,QAAIC,IAAI,GAAID,OAAO,CAACH,IAAR,EAAZ;AACCI,IAAAA,IAAI,qBAASA,IAAT;AAAcC,MAAAA,EAAE,EAACF,OAAO,CAACE;AAAzB,MAAJ;AACDJ,IAAAA,YAAY,CAACK,IAAb,CAAkBF,IAAlB;AACA,GAJJ;AAKG,QAAMpB,GAAG,CAACM,uBAAuB,CAACW,YAAD,CAAxB,CAAT;AACA,QAAMjB,GAAG,CAACK,2BAA2B,EAA5B,CAAT;AAEN;;AAED,SAASkB,OAAT,CAAiBC,GAAjB,EAAsB;AAClB,OAAI,IAAIC,GAAR,IAAeD,GAAf,EAAoB;AAChB,QAAGA,GAAG,CAACE,cAAJ,CAAmBD,GAAnB,CAAH,EACI,OAAO,IAAP;AACP;;AACD,SAAO,KAAP;AACH;;AAGD,UAAUE,yBAAV,CAAoCC,QAApC,EAA6C;AACzC,QAAM5B,GAAG,CAACI,qBAAqB,EAAtB,CAAT;AACA,QAAMiB,EAAE,GAAGO,QAAQ,CAACC,OAAT,CAAiBR,EAA5B;AACA,MAAIL,IAAI,GAAG,MAAMf,IAAI,CAACQ,eAAD,EAAiBY,EAAjB,CAArB;AACA,QAAMrB,GAAG,CAACO,yBAAyB,CAACS,IAAD,CAA1B,CAAT;AACA,QAAMhB,GAAG,CAACK,2BAA2B,EAA5B,CAAT;AACH;;AACD,UAAUyB,qBAAV,CAAgCC,KAAhC,EAAsC;AAClC,QAAM/B,GAAG,CAACW,kBAAkB,CAACoB,KAAK,CAACF,OAAP,CAAnB,CAAT;AAGH;;AAED,UAAUG,uBAAV,CAAkCD,KAAlC,EAAwC;AACrC,QAAM/B,GAAG,CAACY,oBAAoB,CAACmB,KAAK,CAACF,OAAP,CAArB,CAAT;AACF;;AACD,UAAUI,mBAAV,GAA+B;AAC3B,QAAMC,UAAU,GAAG,MAAM/B,MAAM,CAACgC,KAAK,IAAIA,KAAK,CAACC,gBAAhB,CAA/B;AACA,QAAMC,UAAU,GAAG,MAAMlC,MAAM,CAACgC,KAAK,IAAIA,KAAK,CAACG,kBAAhB,CAA/B;;AAED,MAAGf,OAAO,CAACc,UAAD,CAAV,EAAuB;AACtB,QAAIrB,IAAI,GAAG,MAAMf,IAAI,CAACS,aAAD,EAAe2B,UAAU,CAACE,QAA1B,CAArB;;AACA,QAAGF,UAAU,CAACE,QAAX,KAAwB,KAA3B,EAAiC;AACjC,UAAGhB,OAAO,CAACW,UAAD,CAAV,EAAuB;AACnB,cAAMlC,GAAG,CAACI,qBAAqB,EAAtB,CAAT;AACA,YAAIoC,KAAK,GAAGxB,IAAI,CAACyB,MAAL,CAAaV,KAAD,IAAU;AAC9B,iBAAOA,KAAK,CAACW,IAAN,CAAWC,IAAX,GAAkBC,WAAlB,GAAgCC,QAAhC,CAAyCX,UAAU,CAACY,UAAX,CAAsBH,IAAtB,GAA6BC,WAA7B,EAAzC,CAAP;AACH,SAFW,CAAZ;AAGA,cAAM5C,GAAG,CAACM,uBAAuB,CAACkC,KAAD,CAAxB,CAAT;AACA,cAAMxC,GAAG,CAACa,SAAS,EAAV,CAAT;AACA,cAAMb,GAAG,CAACK,2BAA2B,EAA5B,CAAT;AACH,OARD,MASM;AACF,cAAML,GAAG,CAACM,uBAAuB,CAACU,IAAD,CAAxB,CAAT;AACA,cAAMhB,GAAG,CAACa,SAAS,EAAV,CAAT;AACD;AAAC,KAbJ,MAcM;AACF,UAAGU,OAAO,CAACW,UAAD,CAAV,EAAuB;AACnB,cAAMlC,GAAG,CAACI,qBAAqB,EAAtB,CAAT;AACA,YAAIoC,KAAK,GAAGxB,IAAI,CAACyB,MAAL,CAAaV,KAAD,IAAU;AAC9B,iBAAOA,KAAK,CAACW,IAAN,CAAWC,IAAX,GAAkBC,WAAlB,GAAgCC,QAAhC,CAAyCX,UAAU,CAACY,UAAX,CAAsBH,IAAtB,GAA6BC,WAA7B,EAAzC,CAAP;AACH,SAFW,CAAZ;AAGA,cAAM5C,GAAG,CAACM,uBAAuB,CAACkC,KAAD,CAAxB,CAAT;AACA,cAAMxC,GAAG,CAACa,SAAS,EAAV,CAAT;AACA,cAAMb,GAAG,CAACK,2BAA2B,EAA5B,CAAT;AAEH,OATD,MAUI;AACA,cAAML,GAAG,CAACI,qBAAqB,EAAtB,CAAT;AACA,YAAIY,IAAI,GAAG,MAAMf,IAAI,CAACO,SAAD,CAArB;AACA,YAAIS,YAAY,GAAG,EAAnB;AACAD,QAAAA,IAAI,CAACE,OAAL,CAAaC,OAAO,IAAI;AACpB,cAAIC,IAAI,GAAID,OAAO,CAACH,IAAR,EAAZ;AACCI,UAAAA,IAAI,qBAASA,IAAT;AAAcC,YAAAA,EAAE,EAACF,OAAO,CAACE;AAAzB,YAAJ;AACDJ,UAAAA,YAAY,CAACK,IAAb,CAAkBF,IAAlB;AACA,SAJJ;AAKA,cAAMpB,GAAG,CAACM,uBAAuB,CAACW,YAAD,CAAxB,CAAT;AACA,cAAMjB,GAAG,CAACa,SAAS,EAAV,CAAT;AACA,cAAMb,GAAG,CAACK,2BAA2B,EAA5B,CAAT;AACD;AACJ;AACH,GAzCD,MA0CK,IAAGkB,OAAO,CAACW,UAAD,CAAV,EAAuB;AAC3B,UAAMlC,GAAG,CAACI,qBAAqB,EAAtB,CAAT;AACA,QAAIY,IAAI,GAAG,MAAMb,MAAM,CAACgC,KAAK,IAAIA,KAAK,CAACY,YAAhB,CAAvB;AACA,QAAIP,KAAK,GAAGxB,IAAI,CAACyB,MAAL,CAAaV,KAAD,IAAU;AAC9B,aAAOA,KAAK,CAACW,IAAN,CAAWC,IAAX,GAAkBC,WAAlB,GAAgCC,QAAhC,CAAyCX,UAAU,CAACY,UAAX,CAAsBH,IAAtB,GAA6BC,WAA7B,EAAzC,CAAP;AACH,KAFW,CAAZ;AAGA,UAAM5C,GAAG,CAACM,uBAAuB,CAACkC,KAAD,CAAxB,CAAT;AACA,UAAMxC,GAAG,CAACa,SAAS,EAAV,CAAT;AACA,UAAMb,GAAG,CAACK,2BAA2B,EAA5B,CAAT;AACC;AACJ;;AAMD,UAAW2C,QAAX,GAAsB;AAClB,QAAMjD,SAAS,CAACe,QAAQ,CAACmC,kBAAV,EAA6BlC,2BAA7B,CAAf;AACA,QAAMhB,SAAS,CAACe,QAAQ,CAACoC,oBAAV,EAA+BvB,yBAA/B,CAAf;AACA,QAAMzB,UAAU,CAACY,QAAQ,CAACqC,gBAAV,EAA2BrB,qBAA3B,CAAhB;AACA,QAAM5B,UAAU,CAACY,QAAQ,CAACsC,kBAAV,EAA6BpB,uBAA7B,CAAhB;AACA,QAAM9B,UAAU,CAACY,QAAQ,CAACuC,aAAV,EAAwBpB,mBAAxB,CAAhB;AACH;;AAED,eAAee,QAAf","sourcesContent":["import {takeEvery,put,call,takeLatest,select} from 'redux-saga/effects';\r\nimport {change_loading_status,change_loading_status_false} from '../action/loading';\r\nimport {feetListProductsSuccess,feetSingleProductsSuccess} from '../action/products';\r\nimport {getMethod,getSingleMethod,fillterbycate} from '../api/index';\r\nimport {fillterTextSuccess,fillterSelectSuccess,resetfill} from '../action/fillter';\r\nimport * as CONSTANT from '../constant/index';\r\n\r\nfunction* getListProductsFromFirebase(){\r\n    yield put(change_loading_status());\r\n    let data = yield call(getMethod);\r\n    let listProducts = [];\r\n    data.forEach(element => {\r\n        let temp  = element.data();\r\n         temp =   {...temp,id:element.id}\r\n        listProducts.push(temp);\r\n       });\r\n       yield put(feetListProductsSuccess(listProducts));\r\n       yield put(change_loading_status_false());\r\n\r\n}\r\n\r\nfunction isEmpty(obj) {\r\n    for(var key in obj) {\r\n        if(obj.hasOwnProperty(key))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\nfunction* feetSingleProductFirebase(idSingle){\r\n    yield put(change_loading_status());\r\n    const id = idSingle.payload.id;\r\n    let data = yield call(getSingleMethod,id);\r\n    yield put(feetSingleProductsSuccess(data));\r\n    yield put(change_loading_status_false());\r\n}\r\nfunction* addFillterTexttostore(value){\r\n    yield put(fillterTextSuccess(value.payload));\r\n    \r\n\r\n}\r\n\r\nfunction* addFillterSelecttostore(value){\r\n   yield put(fillterSelectSuccess(value.payload));\r\n}\r\nfunction* submitFillterButton(){\r\n    const textSearch = yield select(state => state.fillterValueText);\r\n    const cateSearch = yield select(state => state.fillterValueSelect);\r\n  \r\n   if(isEmpty(cateSearch)){\r\n    let data = yield call(fillterbycate,cateSearch.fillCate);\r\n    if(cateSearch.fillCate !== \"all\"){\r\n    if(isEmpty(textSearch)){\r\n        yield put(change_loading_status());\r\n        let data2 = data.filter((value) =>{\r\n            return value.name.trim().toLowerCase().includes(textSearch.fillerName.trim().toLowerCase());\r\n        })\r\n        yield put(feetListProductsSuccess(data2));\r\n        yield put(resetfill());\r\n        yield put(change_loading_status_false());\r\n    }\r\n      else{\r\n        yield put(feetListProductsSuccess(data));\r\n        yield put(resetfill());\r\n      }}\r\n      else{\r\n        if(isEmpty(textSearch)){\r\n            yield put(change_loading_status());\r\n            let data2 = data.filter((value) =>{\r\n                return value.name.trim().toLowerCase().includes(textSearch.fillerName.trim().toLowerCase());\r\n            })\r\n            yield put(feetListProductsSuccess(data2));\r\n            yield put(resetfill());\r\n            yield put(change_loading_status_false());\r\n        \r\n        }\r\n        else{\r\n            yield put(change_loading_status());\r\n            let data = yield call(getMethod);\r\n            let listProducts = [];\r\n            data.forEach(element => {\r\n                let temp  = element.data();\r\n                 temp =   {...temp,id:element.id}\r\n                listProducts.push(temp);\r\n               });\r\n            yield put(feetListProductsSuccess(listProducts));\r\n            yield put(resetfill());\r\n            yield put(change_loading_status_false());\r\n          }\r\n      }\r\n   }\r\n   else if(isEmpty(textSearch)){\r\n    yield put(change_loading_status());   \r\n    let data = yield select(state => state.ListProducts);\r\n    let data2 = data.filter((value) =>{\r\n        return value.name.trim().toLowerCase().includes(textSearch.fillerName.trim().toLowerCase());\r\n    })\r\n    yield put(feetListProductsSuccess(data2));\r\n    yield put(resetfill());\r\n    yield put(change_loading_status_false());\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction * rootSaga (){\r\n    yield takeEvery(CONSTANT.FEET_LIST_PRODUCTS,getListProductsFromFirebase);\r\n    yield takeEvery(CONSTANT.FEET_SINGLE_PRODUCTS,feetSingleProductFirebase);\r\n    yield takeLatest(CONSTANT.ADD_FILLTER_TEXT,addFillterTexttostore);\r\n    yield takeLatest(CONSTANT.ADD_FILLTER_SELECT,addFillterSelecttostore);\r\n    yield takeLatest(CONSTANT.SUBMIT_SEARCH,submitFillterButton)\r\n}\r\n\r\nexport default rootSaga;"]},"metadata":{},"sourceType":"module"}